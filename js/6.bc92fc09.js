(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"95a8":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row"},[s("q-toolbar",{staticClass:"shadow-1 col-xs-12 col-sm-8 offset-sm-2 col-md-6 offset-md-3 bg-grey-1"},[s("q-btn",{attrs:{round:""}},[s("q-avatar",[s("q-badge",{staticStyle:{bottom:"-6px",top:"auto",left:"auto",right:"auto"},attrs:{color:"green",floating:"",transparent:""}},[e._v("online\n          ")])],1)],1),s("q-toolbar-title",[e._v("User")]),s("q-space")],1),s("q-layout",{staticClass:"shadow-1 rounded-borders col-xs-12 col-sm-8 offset-sm-2 col-md-6 offset-md-3",staticStyle:{height:"calc(100vh - 165px)"},attrs:{container:"",view:"lhh LpR lff"}},[s("q-page-container",[s("q-page",[s("div",{ref:"scrollTargetRef",staticClass:"scroll",staticStyle:{"max-height":"calc(100vh - 165px)",overflow:"auto"}},[s("q-scroll-observer",{ref:"scrollObserver",on:{scroll:e.scrollHandler}}),s("q-infinite-scroll",{ref:"chatArea",attrs:{offset:20,"scroll-target":e.$refs.scrollTargetRef,id:"chatArea",reverse:""},on:{load:e.onLoad}},[s("template",{slot:"loading"},[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner",{attrs:{color:"primary",name:"dots",size:"40px"}})],1)]),0===e.messages.length&&e.finishedLoading?s("div",{staticClass:"text-center",staticStyle:{top:"calc(50% - 60px)",position:"absolute",width:"100%"}},[s("q-avatar",{attrs:{size:"100px"}},[s("q-img",{attrs:{src:"https://heartrealestate.com.au/wp-content/uploads/2016/09/default-user-img.jpg",ratio:1}})],1),s("div",{staticClass:"text-body1 text-italic text-bold q-px-md qpt-xs"},[e._v("\n                  Say hi\n                ")])],1):e._e(),e._l(e.messages,(function(t,a){return s("div",{key:a,staticClass:"caption q-px-sm"},[s("q-chat-message",{attrs:{"bg-color":"blue",id:t.id,name:"me",text:t.message,"text-color":"white","text-sanitize":""},scopedSlots:e._u([{key:"avatar",fn:function(){return[s("q-avatar",{staticClass:"q-ml-xs q-mr-xs"},[s("q-img",{attrs:{src:"https://heartrealestate.com.au/wp-content/uploads/2016/09/default-user-img.jpg",ratio:1}})],1)]},proxy:!0}],null,!0)})],1)})),e.showScrollToBottom?s("q-btn",{staticStyle:{position:"absolute",bottom:"6px",left:"0",right:"0",margin:"auto"},attrs:{round:"",icon:"fas fa-arrow-down",size:"md","text-color":"primary",color:"white"},on:{click:e.scrollToBottom}}):e._e(),s("div",{attrs:{id:"bottomAnchor"}})],2)],1)])],1)],1)],1),s("div",{staticClass:"row"},[s("q-footer",{staticClass:"col-xs-12 col-sm-8 offset-sm-2 col-md-6 offset-md-3 bg-grey-1"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 offset-2"},[s("q-input",{ref:"inputArea",attrs:{color:"secondary",outlined:"",placeholder:"Send a message..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},focus:e.focusOnInput,focusout:function(t){e.inputIsFocused=!1}},model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}},[s("q-icon",{staticStyle:{margin:"auto",top:"0",bottom:"0"},attrs:{right:"",color:"primary",flat:"",name:"send",round:"",size:"35px"},on:{click:function(t){return e.sendMessage()}}})],1)],1)])])],1)])},o=[],r=s("0831");const{getScrollTarget:i,setScrollPosition:l}=r["a"];var n={name:"Message",data(){return{messages:[],prevId:null,prevBid:null,prevUser:null,finishedLoading:!1,newMessage:"",dateNow:new Date,actionMenu:!1,sending:!1,joinInterval:null,showScrollToBottom:!1,minimumOffset:null,scrollOffset:null,inputIsFocused:!1,meta:{last_page:1},message:{senderId:1,receiverId:2,message:"test",type:1,created_at:"2020-02-02"},addMessages:[{senderId:1,receiverId:2,message:"test",type:1,created_at:"2020-02-02"},{senderId:2,receiverId:1,message:"test",type:1,created_at:"2020-02-02"},{senderId:1,receiverId:2,message:"test",type:1,created_at:"2020-02-02"},{senderId:2,receiverId:1,message:"test",type:1,created_at:"2020-02-02"},{senderId:1,receiverId:2,message:"test",type:1,created_at:"2020-02-02"},{senderId:2,receiverId:1,message:"test",type:1,created_at:"2020-02-02"}]}},computed:{chatClass(){return this.$q.platform.is.capacitor?this.inputIsFocused?"col-12":this.$q.screen.width<500?"col-10":"col-11":this.inputIsFocused?"col-12":this.$q.screen.width<850?"col-9":"col-10"}},watch:{"$q.screen.height"(){this.minimumOffset=null,this.setScrollToBottom(this.$refs.scrollObserver.getPosition())}},mounted(){this.init()},beforeDestroy(){window.removeEventListener("keyboardDidShow",(()=>{this.showScrollToBottom=!1}))},methods:{addMessage(e){this.messages.push(e)},focusOnInput(){this.inputIsFocused=!0},init(){this.finishedLoading=!1,this.messages=[],this.joinChannel()},joinChannel(){},onLoad(e,t){this.meta.last_page=10*this.addMessages.length,this.addMessages.forEach((e=>{console.log(e),this.addMessage(e)})),t(),console.log(this.messages),this.$refs.chatArea.stop(),this.meta.last_page<=e&&this.$refs.chatArea,this.finishedLoading=!0},scrollHandler(e){0!==e.position&&this.setScrollToBottom(e)},scrollToBottom(){this.minimumOffset=null},sendMessage(){this.addMessage(this.newMessage),this.newMessage=""},setScrollToBottom(e=0){this.scrollOffset=this.$refs.chatArea.$el.scrollHeight-e.position,(!this.minimumOffset||this.scrollOffset<this.minimumOffset)&&(this.minimumOffset=this.scrollOffset),this.showScrollToBottom=this.scrollOffset>2*this.minimumOffset}}},c=n,d=s("2877"),m=s("65c6"),f=s("9c40"),h=s("cb32"),u=s("58a81"),g=s("6ac5"),p=s("2c91"),v=s("4d5a"),w=s("09e3"),y=s("9989"),b=s("ed5e"),q=s("ef35"),x=s("0d59"),I=s("068f"),S=s("8169"),_=s("7ff0"),C=s("27f9"),O=s("0016"),M=s("eebe"),Q=s.n(M),T=Object(d["a"])(c,a,o,!1,null,"4b5263e7",null);t["default"]=T.exports;Q()(T,"components",{QToolbar:m["a"],QBtn:f["a"],QAvatar:h["a"],QBadge:u["a"],QToolbarTitle:g["a"],QSpace:p["a"],QLayout:v["a"],QPageContainer:w["a"],QPage:y["a"],QScrollObserver:b["a"],QInfiniteScroll:q["a"],QSpinner:x["a"],QImg:I["a"],QChatMessage:S["a"],QFooter:_["a"],QInput:C["a"],QIcon:O["a"]})}}]);